<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="author" content="Naoki Nakajima" />
  <meta property="og:url" content="https://pps5.github.io/blog/kotlin_string_trim.html" />
  <meta property="og:title" content="Kotlin における String#trim() - pps5" />
  <meta property="og:site_name" content="pps5" />
  <meta property="og:image" content="https://pps5.github.io/img/icon.png" />
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:title" content="Kotlin における String#trim() - pps5" />
  <meta name="twitter:image" content="https://pps5.github.io/img/icon.png" />
  <meta name="description" content="Java とは異なる Kotlin の trim" />
  <meta property="og:description" content="Java とは異なる Kotlin の trim" />
  <meta name="twitter:description" content="Java とは異なる Kotlin の trim" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kotlin における String#trim() - pps5</title>
  <link rel="icon" href="/img/icon.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
    integrity="sha256-2YQRJMXD7pIAPHiXr0s+vlRWA7GYJEK0ARns7k2sbHY=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/obsidian.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Suez+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <main>
    <header>
      <span class="float-left">
        <a id="title" href="/">pps5</a>
      </span>
      <div class="cropper float-left">
        <a href="/"><img src="/img/icon.png" alt="pps5"></a>
      </div>
    </header>

    <article>
      
              <h1>Kotlin における String#trim()</h1>
              <div>2018/03/15</div>
              <h2>
                <a name="java-" class="dummy-anchor"></a>
                <a class="anchor" href="#java-">
                  <i class="fa fa-link"></i>
                </a>
                Java との挙動の違い
              </h2><p>Kotlin における <code>String#trim()</code> は Java のそれとはやや異なった実装がされています。</p>
<p>Java では全角スペースは削除されませんが、Kotlin では全角スペースも同様に削除されます。</p>
<pre><code class="java">// Java
String word = &quot;　word　&quot;;  // 全角スペースで囲われた文字列
System.out.println(&quot;&#39;&quot; + word.trim() + &quot;&#39;&quot;);  // =&gt; &#39;　word　&#39;</code></pre>
<pre><code class="kotlin">// Kotlin
val word = &quot;　word　&quot;  // 全角スペースで囲われた文字列
println(&quot;&#39;${word.trim()}&#39;&quot;)  // =&gt; &#39;word&#39;</code></pre>
<p>Kotlin の公式のソースコードを読んでみると、内部的には <code>CharSequence#trim()</code> を呼び出しており、さらに <code>Character.isWhitespace()</code> でスペースの判定を行っています。
このメソッドは Unicode のコードポイントで判別しているため、Space Separator カテゴリに含まれる全角スペースは trim メソッドで消されてしまいます。</p>
<p>一方で Java はカテゴリを考慮せず、単純に u0020 以下のものを削除するので、全角スペース(u3000) は削除されません。</p>

              <h2>
                <a name="kotlin-java-" class="dummy-anchor"></a>
                <a class="anchor" href="#kotlin-java-">
                  <i class="fa fa-link"></i>
                </a>
                Kotlin で Java と同じ挙動を目指す
              </h2><p>Kotlin の trim は <code>predicate</code> を渡すことができるため、そこで Java と同様の処理を行います。</p>
<pre><code class="kotlin">val word = &quot;　word &quot;  // 全角スペースと半角スペースで囲われた文字列
println(word.trim { it &lt;= &#39; &#39; })  // =&gt; &#39;　word&#39;</code></pre>
<p>無理やり <code>java.lang.String</code> クラスへキャストすることでも可能ですが、Kotlinでは推奨されない方法なので、<code>predicate</code> を渡す方法が良いでしょう。</p>

              <h2>
                <a name="-" class="dummy-anchor"></a>
                <a class="anchor" href="#-">
                  <i class="fa fa-link"></i>
                </a>
                参考
              </h2><ul>
<li>[trim - Kotlin Programming Language](<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/trim.html%5D">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/trim.html]</a></li>
</ul>

    </article>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"
    integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
  <script>
    hljs.initHighlightingOnLoad();
    document.addEventListener('DOMContentLoaded', (e) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
</body>

</html>